#include<stdio.h>

#define SIZE 8
//S_rule
void S_rule(int (*ca)[SIZE],int rule){
int new[SIZE][SIZE];
for(int i=0;i<SIZE;i++)
for(int j=0;j<SIZE;j++){
//rule1
if(rule==0) new[i][j]=*(*(ca+i)+j);
//rule2
else new[i][j]=0;
if(i==0 || i==SIZE-1){
if(i==SIZE-1){
new[i][j] ^=*(*(ca)+j);
new[i][j] ^=*(*(ca+SIZE-2)+j);
}
else{
new[i][j] ^=*(*(ca+SIZE-1)+j);
new[i][j] ^=*(*(ca+1)+j);
}
}
else{
new[i][j] ^=*(*(ca+i+1)+j);
new[i][j] ^=*(*(ca+i-1)+j);
}
if(j==0 || j==SIZE-1){
if(j==SIZE-1){
new[i][j] ^=*(*(ca+i));
new[i][j] ^=*(*(ca+i)+SIZE-2);
}
else{
new[i][j] ^=*(*(ca+i)+SIZE-1);
new[i][j] ^=*(*(ca+i)+1);
}
}
else{
new[i][j] ^=*(*(ca+i)+j+1);
new[i][j] ^=*(*(ca+i)+j-1);
}
}
for(int i=0;i<SIZE;i++)
for(int j=0;j<SIZE;j++)
*(*(ca+i)+j)=new[i][j];
}

int main(){
    int M[SIZE][SIZE]={
        {172,133,53,-79,156,-168,-249,-143}, 
        {77,46,-112,-41,166,192,-202,137},
        {-102,-204,-19,44,62,-59,-16,-7 },
        {-146,-92,-29,3,228,111,-32,110},
        {-14,-95,13,217,-80,-228,-117,-111},
        {40,50,-50,142,-64,-4,29,-251},
        {161,-38,254,-108,43,-218,114,208},
        {-70,-48,139,19,-254,224,39,-246}
    };
    
    for(int c=0;c<SIZE/2;c++){
        S_rule(M,1);
        for(int i=0;i<SIZE;i++){
        for(int j=0;j<SIZE;j++) 
            printf("%d ",M[i][j]);
        printf("\n");
        }
        printf("\n");
    }
    
}


/*
#include"ca8.c"
int main(){
int M[SIZE][SIZE][SIZE]={
        {{0,1,0,0,1,1,0,0},{0,1,1,0,1,1,1,1},{0,1,1,0,1,1,1,1},{0,1,1,0,1,0,1,1},{0,1,1,0,1,0,0,1},{0,1,1,0,1,1,1,0},{0,1,1,0,0,1,1,1},{0,0,1,0,0,0,0,0}},
        {{0,1,1,0,1,0,0,1},{0,1,1,0,1,1,1,0},{0,1,1,1,0,1,0,0},{0,1,1,0,1,1,1,1},{0,0,1,0,0,0,0,0},{0,1,1,1,1,0,0,1},{0,1,1,0,1,1,1,1},{0,1,1,1,0,1,0,1}},
        {{0,1,1,1,0,0,1,0},{0,0,1,0,0,0,0,0},{0,1,1,1,0,0,0,0},{0,1,1,0,0,0,0,1},{0,1,1,1,0,0,1,1},{0,1,1,1,0,1,0,0},{0,0,1,0,0,0,0,0},{0,1,1,0,1,0,0,1}},
        {{0,1,1,1,0,0,1,1},{0,0,1,0,0,0,0,0},{0,1,1,1,0,1,0,0},{0,1,1,0,1,0,0,0},{0,1,1,0,0,1,0,1},{0,0,1,0,0,0,0,0},{0,1,1,0,1,1,1,1},{0,1,1,0,1,1,1,0}},
        {{0,1,1,0,1,1,0,0},{0,1,1,1,1,0,0,1},{0,0,1,0,0,0,0,0},{0,1,1,1,0,1,1,1},{0,1,1,0,0,0,0,1},{0,1,1,1,1,0,0,1},{0,0,1,0,0,0,0,0},{0,1,1,1,0,1,0,0}},
        {{0,1,1,0,1,1,1,1},{0,0,1,0,0,0,0,0},{0,1,1,0,0,1,0,0},{0,1,1,0,1,0,0,1},{0,1,1,1,0,0,1,1},{0,1,1,0,0,0,1,1},{0,1,1,0,1,1,1,1},{0,1,1,1,0,1,1,0}},
        {{0,1,1,0,0,1,0,1},{0,1,1,1,0,0,1,0},{0,0,1,0,0,0,0,0},{0,1,1,1,1,0,0,1},{0,1,1,0,1,1,1,1},{0,1,1,1,0,1,0,1},{0,1,1,1,0,0,1,0},{0,0,1,0,0,0,0,0}},
        {{0,1,1,0,0,1,1,0},{0,1,1,1,0,1,0,1},{0,1,1,1,0,1,0,0},{0,1,1,1,0,1,0,1},{0,1,1,1,0,0,1,0},{0,1,1,0,0,1,0,1},{0,0,1,0,1,1,1,0},{0,0,1,0,1,1,1,0}}                          
    };
    op(M,0,1);
    opr(M,1);
    for(int i=0;i<SIZE;i++){
        for(int j=0;j<SIZE;j++) 
           for(int k=0;k<SIZE;k++)  printf("%d ",M[i][j][k]);
        printf("\n");
    }
    printf("\n");
}
*/